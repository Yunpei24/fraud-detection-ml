# ==============================================================================
# AIRFLOW MODULE - Docker Environment Variables
# ==============================================================================
# This file documents ALL environment variables used by Airflow containers
# ==============================================================================

# ------------------------------------------------------------------------------
# AIRFLOW CORE CONFIGURATION
# ------------------------------------------------------------------------------
AIRFLOW__CORE__EXECUTOR=LocalExecutor
AIRFLOW__CORE__SQL_ALCHEMY_CONN=postgresql+psycopg2://fraud_user:${POSTGRES_PASSWORD}@postgres:5432/fraud_detection
AIRFLOW__CORE__FERNET_KEY=${AIRFLOW_FERNET_KEY}
AIRFLOW__CORE__DAGS_ARE_PAUSED_AT_CREATION=true
AIRFLOW__CORE__LOAD_EXAMPLES=false

# ------------------------------------------------------------------------------
# AIRFLOW WEBSERVER
# ------------------------------------------------------------------------------
AIRFLOW__WEBSERVER__SECRET_KEY=${AIRFLOW_SECRET_KEY}
AIRFLOW__WEBSERVER__EXPOSE_CONFIG=true
AIRFLOW__WEBSERVER__BASE_URL=http://localhost:8080

# ------------------------------------------------------------------------------
# AIRFLOW SCHEDULER
# ------------------------------------------------------------------------------
AIRFLOW__SCHEDULER__ENABLE_HEALTH_CHECK=true
AIRFLOW__SCHEDULER__DAG_DIR_LIST_INTERVAL=30

# ------------------------------------------------------------------------------
# DATABASE (PostgreSQL) - For Airflow metadata
# ------------------------------------------------------------------------------
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_DB=fraud_detection
POSTGRES_USER=fraud_user
POSTGRES_PASSWORD=${POSTGRES_PASSWORD}

# ------------------------------------------------------------------------------
# REDIS (Optional - for Celery Executor)
# ------------------------------------------------------------------------------
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=${REDIS_PASSWORD}
AIRFLOW__CELERY__BROKER_URL=redis://:${REDIS_PASSWORD}@redis:6379/0
AIRFLOW__CELERY__RESULT_BACKEND=db+postgresql://fraud_user:${POSTGRES_PASSWORD}@postgres:5432/fraud_detection

# ------------------------------------------------------------------------------
# MLFLOW
# ------------------------------------------------------------------------------
MLFLOW_TRACKING_URI=http://mlflow:5000

# ------------------------------------------------------------------------------
# ADMIN USER
# ------------------------------------------------------------------------------
AIRFLOW_ADMIN_USERNAME=admin
AIRFLOW_ADMIN_PASSWORD=${AIRFLOW_ADMIN_PASSWORD}
AIRFLOW_ADMIN_FIRSTNAME=Admin
AIRFLOW_ADMIN_LASTNAME=User
AIRFLOW_ADMIN_EMAIL=admin@frauddetection.local

# ------------------------------------------------------------------------------
# AZURE (Optional)
# ------------------------------------------------------------------------------
AZURE_STORAGE_CONNECTION_STRING=${AZURE_STORAGE_CONNECTION_STRING}
AZURE_STORAGE_CONTAINER_NAME=fraud-data

# ------------------------------------------------------------------------------
# SMTP (Optional - for email alerts)
# ------------------------------------------------------------------------------
AIRFLOW__SMTP__SMTP_HOST=smtp.gmail.com
AIRFLOW__SMTP__SMTP_PORT=587
AIRFLOW__SMTP__SMTP_USER=${SMTP_USER}
AIRFLOW__SMTP__SMTP_PASSWORD=${SMTP_PASSWORD}
AIRFLOW__SMTP__SMTP_MAIL_FROM=airflow@frauddetection.local

# ------------------------------------------------------------------------------
# APPLICATION
# ------------------------------------------------------------------------------
ENVIRONMENT=development
LOG_LEVEL=INFO

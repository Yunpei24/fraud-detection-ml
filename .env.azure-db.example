# ==============================================================================
# AZURE DATABASE FOR POSTGRESQL CONFIGURATION
# ==============================================================================
# Copy this file to .env.azure-db and fill in your Azure values
# NEVER commit .env.azure-db to Git (already in .gitignore)
# ==============================================================================

# ------------------------------------------------------------------------------
# Azure PostgreSQL Database Configuration
# ------------------------------------------------------------------------------
# Server: fraud-detection-db.postgres.database.azure.com
# Port: 5432 (default)
# SSL Mode: REQUIRED (Azure enforces SSL)
# ------------------------------------------------------------------------------

POSTGRES_HOST=fraud-detection-db.postgres.database.azure.com
POSTGRES_PORT=5432
POSTGRES_DB=fraud_detection
POSTGRES_USER=fraud_user@fraud-detection-db
POSTGRES_PASSWORD=YOUR_SECURE_PASSWORD_HERE

# ------------------------------------------------------------------------------
# Redis Configuration (Still containerized on VM1)
# ------------------------------------------------------------------------------

REDIS_PASSWORD=YOUR_REDIS_PASSWORD_HERE

# ------------------------------------------------------------------------------
# MLflow Configuration
# ------------------------------------------------------------------------------

MLFLOW_DEFAULT_ARTIFACT_ROOT=/mlflow/artifacts
MLFLOW_TRACKING_URI=http://mlflow:5000

# ------------------------------------------------------------------------------
# Airflow Configuration
# ------------------------------------------------------------------------------

AIRFLOW_FERNET_KEY=YOUR_FERNET_KEY_HERE
AIRFLOW_USERNAME=admin
AIRFLOW_PASSWORD=YOUR_AIRFLOW_PASSWORD_HERE
AIRFLOW_ADMIN_EMAIL=admin@frauddetection.local
ALERT_EMAIL=ml-alerts@frauddetection.com

# ------------------------------------------------------------------------------
# API Authentication (for data/drift services calling FastAPI)
# ------------------------------------------------------------------------------

API_URL=https://fraud-detection-api-ammi-2025.azurewebsites.net
API_USERNAME=admin
API_PASSWORD=YOUR_API_PASSWORD_HERE
API_USERNAME_DRIFT=admin
API_PASSWORD_DRIFT=YOUR_API_PASSWORD_HERE

# ------------------------------------------------------------------------------
# Azure Storage (Optional - for model/data storage)
# ------------------------------------------------------------------------------

AZURE_STORAGE_CONNECTION_STRING=DefaultEndpointsProtocol=https;AccountName=frauddetection;AccountKey=YOUR_KEY;EndpointSuffix=core.windows.net
AZURE_STORAGE_CONTAINER_NAME=fraud-models

# ------------------------------------------------------------------------------
# Docker Hub Configuration
# ------------------------------------------------------------------------------

DOCKERHUB_USERNAME=yoshua24

# ------------------------------------------------------------------------------
# Environment
# ------------------------------------------------------------------------------

ENVIRONMENT=production
WEBAPP_URL=https://your-frontend-app.azurewebsites.net

# ==============================================================================
# INSTRUCTIONS TO GET THESE VALUES
# ==============================================================================
#
# 1. POSTGRES_HOST: From Azure Portal → PostgreSQL → Overview → Server name
#    Format: <server-name>.postgres.database.azure.com
#
# 2. POSTGRES_USER: Format: <username>@<server-name>
#    Example: fraud_user@fraud-detection-db
#
# 3. POSTGRES_PASSWORD: The password you set during Azure Database creation
#
# 4. AIRFLOW_FERNET_KEY: Generate with:
#    python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
#
# 5. REDIS_PASSWORD: Generate strong password (min 16 chars):
#    openssl rand -base64 24
#
# 6. AZURE_STORAGE_CONNECTION_STRING: From Azure Portal → Storage Account → Access Keys
#
# ==============================================================================
# SECURITY NOTES
# ==============================================================================
#
# - Keep this file secure (chmod 600 .env.azure-db)
# - Never commit to Git (.gitignore already configured)
# - Use Azure Key Vault for production secrets
# - Rotate passwords regularly (every 90 days recommended)
# - Use Azure Managed Identities when possible
#
# ==============================================================================
